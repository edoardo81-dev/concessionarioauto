<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dettaglio Veicolo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* Palette per categoria */
    .theme-auto  { --cat: #0d6efd; --cat-dark: #0b5ed7; --cat-text: #fff; }
    .theme-moto  { --cat: #198754; --cat-dark: #157347; --cat-text: #fff; }
    .theme-furgo { --cat: #ffc107; --cat-dark: #e0a800; --cat-text: #212529; }

    /* Banda titolo + badge */
    .category-band { background: var(--cat); color: var(--cat-text); padding: .75rem 1rem; border-radius: .75rem; }
    .category-badge { display:inline-block; padding:.25rem .6rem; border-radius:.5rem;
      background: var(--cat-dark); color: var(--cat-text); font-size:.875rem; }

    /* Card con accento */
    .card.theme-accent { border-top: .35rem solid var(--cat); border-radius: .75rem; }

    /* Dettagli */
    .spec-label { width: 260px; color: #6c757d; }
    .price { font-weight: 700; font-size: 1.1rem; }

    /* Sfondo neutro + ombre leggere */
    html, body { background-color:#e6e9ee; }
    .category-band { box-shadow: 0 .25rem .75rem rgba(0,0,0,.06); }
    .card { background: #fff; border: 1px solid rgba(0,0,0,.08); box-shadow: 0 .125rem .35rem rgba(0,0,0,.06); }
    .container { padding-bottom: 2rem; }
  </style>
</head>

<body th:with="cat=${auto} != null ? 'auto' : (${moto} != null ? 'moto' : 'furgo')"
      th:class="${'theme-' + cat}">
<div class="container mt-5">

  <!-- Banda categoria + titolo -->
  <div class="category-band mb-4">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
      <div>
        <h2 class="mb-0"
            th:text="${auto != null ? auto.marca + ' ' + auto.modello
                     : (moto != null ? moto.marca + ' ' + moto.modello
                     : furgone.marca + ' ' + furgone.modello)}"></h2>
        <span class="category-badge ms-0 ms-sm-3"
              th:text="${cat == 'auto' ? 'Automobili' : (cat == 'moto' ? 'Motociclette' : 'Furgoni')}">
        </span>
      </div>

      <!-- Bottone rosso Bootstrap (Opz. A) -->
      <a th:href="${auto} != null ? @{/automobili} : (${moto} != null ? @{/motociclette} : @{/furgoni})"
         class="btn btn-danger">
        Torna alla categoria
      </a>
    </div>
  </div>

  <!-- Card dettaglio -->
  <div class="card theme-accent shadow-sm">
    <div class="card-body">

      <!-- Codice immatricolazione -->
      <div class="d-flex flex-wrap py-1">
        <div class="spec-label">Codice Immatricolazione</div>
        <div>
          <span th:if="${auto != null}"    th:text="${auto.codiceImmatricolazione}"></span>
          <span th:if="${moto != null}"    th:text="${moto.codiceImmatricolazione}"></span>
          <span th:if="${furgone != null}" th:text="${furgone.codiceImmatricolazione}"></span>
        </div>
      </div>

      <!-- Prezzo -->
      <div class="d-flex flex-wrap py-1">
        <div class="spec-label">Prezzo</div>
        <div class="price">
          €<span th:if="${auto != null}"    th:text="${@priceFormatter.format(auto.prezzo)}"></span>
          <span th:if="${moto != null}"    th:text="${@priceFormatter.format(moto.prezzo)}"></span>
          <span th:if="${furgone != null}" th:text="${@priceFormatter.format(furgone.prezzo)}"></span>
        </div>
      </div>

      <!-- Data immatricolazione -->
      <div class="d-flex flex-wrap py-1">
        <div class="spec-label">Data Immatricolazione</div>
        <div>
          <span th:if="${auto != null}"    th:text="${auto.dataImmatricolazione}"></span>
          <span th:if="${moto != null}"    th:text="${moto.dataImmatricolazione}"></span>
          <span th:if="${furgone != null}" th:text="${furgone.dataImmatricolazione}"></span>
        </div>
      </div>

      <!-- ===== Attributi SPECIFICI per tipo ===== -->

      <!-- AUTOMOBILE: Porte, Elettrica -->
      <div class="d-flex flex-wrap py-1" th:if="${auto != null}">
        <div class="spec-label">Numero porte</div>
        <div><span th:text="${auto.porte}"></span></div>
      </div>
      <div class="d-flex flex-wrap py-1" th:if="${auto != null}">
        <div class="spec-label">Alimentazione</div>
        <div><span th:text="${auto.elettrica} ? 'Elettrica' : 'Endotermica'"></span></div>
      </div>

      <!-- MOTOCICLETTA: Cilindrata, Sidecar -->
      <div class="d-flex flex-wrap py-1" th:if="${moto != null}">
        <div class="spec-label">Cilindrata</div>
        <div><span th:text="${moto.cilindrata}"></span> cc</div>
      </div>
      <div class="d-flex flex-wrap py-1" th:if="${moto != null}">
        <div class="spec-label">Sidecar</div>
        <div><span th:text="${moto.sidecar} ? 'Sì' : 'No'"></span></div>
      </div>

      <!-- FURGONE: Capacità di carico, Refrigerato -->
      <div class="d-flex flex-wrap py-1" th:if="${furgone != null}">
        <div class="spec-label">Capacità di carico</div>
        <div><span th:text="${#numbers.formatDecimal(furgone.capacitaCarico,1,0)}"></span> kg</div>
      </div>
      <div class="d-flex flex-wrap py-1" th:if="${furgone != null}">
        <div class="spec-label">Refrigerato</div>
        <div><span th:text="${furgone.refrigerato} ? 'Sì' : 'No'"></span></div>
      </div>

    </div>
  </div>

</div>
</body>
</html>
